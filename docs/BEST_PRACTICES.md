# Agent Skill 最佳实践

本文档总结了使用和创建 Agent Skill 的最佳实践，帮助你最大化 Skill 的价值。

## 📋 目录

- [使用 Skill 的最佳实践](#使用-skill-的最佳实践)
- [创建 Skill 的最佳实践](#创建-skill-的最佳实践)
- [团队协作最佳实践](#团队协作最佳实践)
- [维护和优化最佳实践](#维护和优化最佳实践)

---

## 使用 Skill 的最佳实践

### 1. 选择合适的安装方式

**个人 Skill vs 项目 Skill**

| 场景 | 推荐方式 | 路径 | 优点 |
|:---|:---|:---|:---|
| 个人通用能力 | 全局安装 | `~/.claude/skills/` | 所有项目自动可用 |
| 团队协作项目 | 项目安装 | `.claude/skills/` | 统一标准、随代码版本控制 |
| 特定领域项目 | 项目安装 | `.claude/skills/` | 领域专属、不污染全局 |

**建议**：
- 将 `clarify-demand-uncertainty` 安装到全局（适用于所有场景）
- 将领域特定的 Skill（如 `analyzing-marketing-campaign`）安装到项目目录
- 将项目的 `.claude/skills/` 目录提交到 Git，确保团队成员使用相同的 Skill

### 2. 清晰表达意图

**❌ 不好的做法：**
```
帮我分析一下这个数据
```

**✅ 好的做法：**
```
我上传了本周的营销活动数据。请分析数据，帮助我了解各渠道的表现情况
（漏斗绩效和效率绩效），以及是否需要重新分配预算。我可以在渠道间调配
最多 ¥10,000 的预算，单个渠道的预算增幅不超过 15%。
```

**原则**：
- 明确说明数据类型和来源
- 清楚表达期望的分析内容
- 提供必要的约束条件和参数

### 3. 信任 Skill 但验证结果

**Skill 带来的好处：**
- 标准化的分析流程
- 减少人为错误
- 一致的输出质量

**但你仍应该：**
- 检查关键数值的合理性
- 理解分析背后的逻辑
- 根据业务场景调整建议

**示例检查清单：**
- [ ] 数据质量报告：是否有异常值或缺失值？
- [ ] 计算公式：CTR、CVR、ROAS 的计算是否合理？
- [ ] 基准对比：基准值是否符合当前业务状态？
- [ ] 预算建议：是否符合业务策略和约束条件？

### 4. 利用 Skill 的可组合性

多个 Skill 可以协同工作，创造更大价值。

**场景 1：数据分析 + 需求澄清**
```
用户："帮我分析营销数据并优化策略"
Agent（澄清 Skill）："在分析之前，我需要确认：
  1. 优化目标是什么？（提升 ROI / 降低 CPA / 增加转化量）
  2. 预算约束是什么？
  3. 有哪些不可调整的渠道？"
用户：回答问题
Agent（分析 Skill）：执行完整分析并提供优化建议
```

**场景 2：TDD + 代码重构**（未来 Skill）
```
Agent：先写测试 → 实现功能 → 重构优化 → 确保测试通过
```

---

## 创建 Skill 的最佳实践

### 1. 识别合适的场景

**适合创建 Skill 的场景：**
- ✅ 高频重复的工作流程（每周/每月执行）
- ✅ 有明确的标准和规范（如数据分析、代码审查）
- ✅ 容易出错或遗漏步骤的任务
- ✅ 需要团队统一标准的流程
- ✅ 领域专业知识密集的任务

**不适合创建 Skill 的场景：**
- ❌ 一次性的临时任务
- ❌ 极度灵活、无固定模式的任务
- ❌ 过于简单、无需指导的任务
- ❌ 高度依赖上下文、难以标准化的任务

### 2. 使用 5 步改造法

**步骤 1：识别流程**
- 记录你执行任务的完整步骤
- 标注关键决策点和判断条件
- 识别常见错误和遗漏

**示例：营销数据分析**
```
传统流程：
1. 打开 Excel，导入数据
2. 检查数据质量（容易遗漏）
3. 手动计算 CTR、CVR（容易算错）
4. 查找基准值（需要翻文档）
5. 对比并解读（主观性强）
6. 计算 ROAS、CPA（再次容易算错）
7. 提出预算调整建议（依赖经验）
```

**步骤 2：标准化 I/O**

**输入标准化：**
```yaml
输入要求：
  格式：CSV 文件
  必需列：日期、渠道、展示次数、点击次数、转化次数、支出、收入
  可选参数：预算调配额度、增幅限制、自定义基准值
```

**输出标准化：**
```yaml
输出结构：
  1. 数据质量报告（表格 + 文字说明）
  2. 漏斗分析结果（表格 + 对比 + 解读）
  3. 效率分析结果（表格 + 计算过程）
  4. 预算调整建议（表格 + 理由）
```

**步骤 3：优化逻辑**

**原始逻辑：**
```
IF CTR < 基准值 THEN "表现不佳"
IF ROAS < 1.0 THEN "亏损"
```

**优化后逻辑：**
```
IF CTR < 基准值 * 0.8 THEN "显著低于基准"
ELSE IF CTR < 基准值 THEN "略低于基准"
ELSE IF CTR < 基准值 * 1.2 THEN "达到基准"
ELSE "显著高于基准"

考虑多个维度：
- 漏斗绩效（CTR、CVR）
- 效率绩效（ROAS、CPA）
- 趋势变化（环比、同比）
综合评分后给出建议
```

**步骤 4：编写 SKILL.md**

使用标准模板：

```markdown
---
name: skill-name
description: 一句话描述
---

# Skill 标题

## 何时使用
- 场景 1
- 场景 2

## 何时不使用
- 反例 1
- 反例 2

## 输入要求
- 必需：...
- 可选：...

## 工作流程
### 1) 步骤一
详细说明

### 2) 步骤二
详细说明

## 输出规范
- 格式：...
- 结构：...

## 注意事项
- 特殊情况处理
- 限制和假设
```

**步骤 5：测试验证**

**测试维度：**

1. **触发准确性测试**
   - 应该触发的场景（正例）
   - 不应该触发的场景（负例）

2. **工作流完整性测试**
   - 是否执行了所有必要步骤
   - 是否在正确的时机暂停等待输入

3. **输出质量测试**
   - 格式是否符合规范
   - 内容是否准确完整
   - 是否易于理解

4. **边界情况测试**
   - 缺失数据如何处理
   - 异常值如何处理
   - 极端情况如何处理

### 3. 设计清晰的触发条件

**原则：明确但不过于严格**

**❌ 过于宽泛（会误触发）：**
```markdown
## 何时使用
当用户上传数据时使用
```

**❌ 过于严格（该触发时不触发）：**
```markdown
## 何时使用
当用户说"请使用营销活动分析 Skill 分析我的周报数据"时使用
```

**✅ 合适的触发条件：**
```markdown
## 何时使用
当用户请求分析多渠道数字营销数据，并需要以下任一功能时：
- 计算漏斗指标（CTR、CVR）并与基准对比
- 计算成本和收益效率指标（ROAS、CPA、净利润）
- 获取基于绩效的预算重新分配建议

## 何时不使用
- 单一渠道的简单数据查询
- 不涉及营销漏斗的数据分析
- 仅需要数据可视化，不需要分析和建议
```

### 4. 提供清晰的示例

**在 SKILL.md 中包含示例：**

```markdown
## 示例输入

```csv
日期,渠道,展示次数,点击次数,转化次数,支出,收入
2024-01-01,微信广告,100000,2500,100,5000,12000
...
```

用户提示：
> 我上传了本周的营销数据，请分析各渠道表现，预算可调配 ¥10,000。

## 示例输出

### 1. 数据质量检查
✅ 数据完整性：所有必需列都存在
⚠️ 发现 2 个异常值：...

### 2. 漏斗分析
| 渠道 | CTR | CVR | vs 基准 |
|------|-----|-----|---------|
| 微信广告 | 2.5% | 4.0% | ✅ 达标 |
...
```

### 5. 文档化领域知识

**将专业知识编码到 Skill 中：**

**示例：营销分析的基准值**
```markdown
## 历史基准值

以下基准值基于中国数字营销行业 2023-2024 年的平均表现：

| 渠道 | CTR | CVR | 说明 |
|------|-----|-----|------|
| 微信广告 | 2.5% | 4.0% | 朋友圈广告平均水平 |
| 百度推广 | 5.0% | 5.0% | 搜索广告平均水平 |
| 抖音广告 | 2.0% | 1.0% | 信息流广告平均水平 |
| 小程序推送 | 18.0% | 3.5% | 已关注用户推送 |

注意：基准值应根据行业、产品类型、季节等因素调整。
```

**示例：预算调整规则**
```markdown
## 预算调整原则

1. **优先级排序**：
   - 第一优先：ROAS > 2.0 且有增长空间的渠道
   - 第二优先：CTR 和 CVR 都达标的渠道
   - 第三优先：单一指标优秀的渠道

2. **风险控制**：
   - 单次调整幅度不超过 15%
   - 保留至少 20% 的渠道预算作为缓冲
   - 不建议完全停止任何渠道（除非连续 4 周表现极差）

3. **增量测试**：
   - 新增预算后观察 2-3 周
   - 如果 ROAS 下降 >10%，考虑回调
```

---

## 团队协作最佳实践

### 1. 建立 Skill 仓库

**推荐的仓库结构：**

```
team-skills/
├── README.md                    # 仓库说明和索引
├── skills/                      # 所有 Skill
│   ├── category-1/              # 按类别组织
│   │   ├── skill-a/
│   │   └── skill-b/
│   └── category-2/
│       └── skill-c/
├── templates/                   # Skill 模板
│   ├── basic-skill-template.md
│   └── advanced-skill-template.md
├── docs/                        # 文档
│   ├── guidelines.md           # 创建指南
│   ├── review-checklist.md     # 审查清单
│   └── changelog.md            # 变更日志
└── examples/                    # 示例和测试
    └── ...
```

### 2. 制定审查流程

**Skill 提交前的检查清单：**

**功能性检查：**
- [ ] Skill 解决了明确的问题
- [ ] 触发条件清晰合理
- [ ] 工作流程完整无遗漏
- [ ] 输入输出规范明确
- [ ] 包含充足的示例

**质量检查：**
- [ ] 文档清晰易懂
- [ ] 没有拼写和语法错误
- [ ] 代码（如有）经过测试
- [ ] 遵循团队的命名规范

**测试验证：**
- [ ] 在实际场景中测试通过
- [ ] 正例和负例都测试过
- [ ] 边界情况处理合理
- [ ] 至少 2 人审查通过

### 3. 版本控制和变更管理

**语义化版本号：**
```
v1.2.3
│ │ └─ 补丁版本：修复 bug、改进文档
│ └─── 次版本：新增功能、向后兼容
└───── 主版本：破坏性变更
```

**变更日志示例：**
```markdown
# Changelog

## [1.2.0] - 2024-01-15

### Added
- 支持自定义基准值
- 新增趋势分析功能

### Changed
- 优化预算调整算法，考虑历史波动性

### Fixed
- 修复小程序渠道 CTR 计算错误

## [1.1.0] - 2023-12-20
...
```

### 4. 知识共享和培训

**定期分享会：**
- 每月一次 Skill 分享会
- 展示新创建的 Skill
- 讨论使用经验和改进建议

**文档和教程：**
- 维护内部 Wiki
- 录制使用教程视频
- 整理常见问题 FAQ

**新成员培训：**
- 提供 Skill 使用培训
- 分配"Skill 导师"
- 鼓励实践和反馈

---

## 维护和优化最佳实践

### 1. 收集使用数据和反馈

**跟踪指标：**
- 使用频率：每周/每月使用次数
- 触发准确率：正确触发 vs 误触发
- 用户满意度：5 分制评分
- 时间节省：使用 Skill 前后对比

**反馈渠道：**
- Issue 系统：报告 bug 和建议
- 定期调查：收集使用体验
- 一对一访谈：深度了解需求

### 2. 迭代优化

**优化时机：**
- 收到 3+ 个类似的改进建议
- 发现触发准确率 < 90%
- 业务规则或基准值发生变化
- 发现更好的实现方式

**优化流程：**
1. 识别问题或机会
2. 设计改进方案
3. 在测试环境验证
4. 更新文档和示例
5. 通知用户变更内容
6. 正式发布新版本

### 3. 定期审查和清理

**季度审查：**
- 检查所有 Skill 的使用情况
- 识别低使用率或过时的 Skill
- 评估是否需要合并或拆分

**清理原则：**
- 3 个月无人使用 → 标记为"待废弃"
- 6 个月无人使用 → 移至 archive 目录
- 业务规则变化 → 及时更新或废弃

### 4. 性能优化

**关注点：**
- **响应时间**：Skill 的执行速度
- **Token 消耗**：提示词的长度和效率
- **准确性**：输出结果的质量

**优化技巧：**
- 精简 Skill 描述，去除冗余信息
- 将大型 Skill 拆分为多个小 Skill
- 使用脚本和工具辅助计算，而不是全部依赖 LLM
- 缓存常用的参考数据（如基准值）

---

## 📊 成功案例

### 案例 1：营销团队的效率革命

**背景**：
- 团队规模：5 人营销团队
- 痛点：每周数据分析耗时 2-3 小时

**实施**：
- 创建 `analyzing-marketing-campaign` Skill
- 标准化分析流程和基准值
- 团队成员共享 Skill

**效果**：
- 分析时间从 2-3 小时降至 15 分钟
- 分析质量提升（零计算错误）
- 团队有更多时间用于策略思考
- 3 个月 ROI：节省约 120 小时人力

### 案例 2：研发团队的需求澄清

**背景**：
- 团队规模：10 人研发团队
- 痛点：因需求不明确导致返工率 30%

**实施**：
- 创建 `clarify-demand-uncertainty` Skill
- 强制在开发前澄清需求
- 定期回顾和优化澄清问题

**效果**：
- 返工率从 30% 降至 10%
- 需求理解时间从平均 2 天降至 1 天
- 团队满意度显著提升
- 6 个月 ROI：节省约 200 小时人力

---

## 🎯 关键要点

1. **选择合适的场景**：高频、标准化、易出错的任务最适合创建 Skill
2. **标准化是核心**：清晰的 I/O 规范和工作流程是 Skill 成功的关键
3. **持续迭代优化**：收集反馈，不断改进 Skill
4. **团队协作**：建立审查流程，确保 Skill 质量
5. **知识沉淀**：将领域知识编码到 Skill 中，实现知识资产化

---

## 📚 延伸阅读

- [快速入门指南](QUICK_START.md)
- [创建 Skill 详细教程](CREATE_YOUR_SKILL.md)
- [FAQ 常见问题](FAQ.md)
- [Agent Skill 重构传统SOP](Agent%20Skill%20重构传统SOP.pdf)

