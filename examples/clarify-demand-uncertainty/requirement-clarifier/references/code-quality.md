# 代码质量任务澄清模板

适用于测试、重构、性能优化等代码质量相关任务。

## 核心澄清问题

### 范围与优先级
1. **具体要解决什么问题？**
   - 是添加测试、重构代码、优化性能，还是修复 bug？
   - 问题影响范围是什么（单个文件、模块、整个项目）？

2. **问题严重程度**
   - 是否影响功能正确性？
   - 是否影响性能或用户体验？
   - 是否阻塞其他开发？

### 技术实现
1. **测试相关**
   - 测试类型偏好（单元测试、集成测试、E2E 测试）？
   - 测试框架选择（Jest、pytest、JUnit 等）？
   - 测试覆盖率要求？

2. **重构相关**
   - 重构目标（提高可读性、降低耦合、提升性能）？
   - 是否需要保持 API 兼容性？
   - 是否需要分阶段重构？

3. **性能优化相关**
   - 性能瓶颈在哪里（CPU、内存、I/O、网络）？
   - 优化目标（提升多少、降低多少）？
   - 是否需要监控和度量？

### 质量标准
1. **验收标准**
   - 如何衡量改进效果？
   - 是否有基准数据可以对比？
   - 是否需要回归测试？

2. **回归风险**
   - 可能影响哪些现有功能？
   - 是否需要回滚方案？
   - 测试策略是什么？

### 约束条件
1. **时间约束**
   - 是否有紧急程度要求？
   - 是否可以分步实施？

2. **兼容性约束**
   - 是否需要保持与现有代码的兼容性？
   - 是否需要保持 API 不变？

## 常见澄清场景

### 场景 1：添加测试
用户说："给这个模块添加测试"

澄清问题：
- 需要测试哪些功能？
- 测试覆盖率目标是多少？
- 是否需要 mock 外部依赖？
- 优先级是什么（核心功能、边界情况、错误处理）？

### 场景 2：代码重构
用户说："重构这段代码"

澄清问题：
- 当前代码的问题是什么（难以维护、重复代码、耦合度高）？
- 重构目标是什么（可读性、可维护性、性能）？
- 是否需要保持行为完全一致？
- 是否需要保持 API 不变？

### 场景 3：性能优化
用户说："优化这个功能的性能"

澄清问题：
- 当前性能指标是什么（响应时间、吞吐量）？
- 性能目标是什么（提升到多少）？
- 是否已经做了性能分析？
- 优化方向是什么（算法、缓存、异步、数据库）？

### 场景 4：Bug 修复
用户说："修复这个 bug"

澄清问题：
- bug 的具体表现是什么？
- 复现步骤是什么？
- 预期行为是什么？
- 根本原因是否已定位？
