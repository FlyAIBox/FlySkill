---
name: analyzing-marketing-campaign
description: 分析每周多渠道营销活动的绩效数据。用于分析多渠道数字营销数据，计算漏斗指标（CTR、CVR）并与基准对比，计算成本和收益效率指标（ROAS、CPA、净利润），或根据绩效规则获取预算重新分配建议。
---


# 营销活动分析

多渠道营销活动数据的自动化分析，专为数字营销优化。

## 输入要求

期望以 CSV 格式提供营销活动数据，支持中英文列名，包含以下列：

- **日期**: 活动日期
- **营销活动名称**: 活动标识符
- **渠道**: 营销渠道（微信广告、百度推广、抖音广告、小程序推送等）
- **受众分群**: 客户细分（如：New_Customers、Retargeting、Loyalty）
- **展示次数**: 广告展示次数（小程序推送渠道可能为空）
- **点击次数**: 点击次数
- **转化次数**: 转化次数
- **支出**: 营销支出（人民币）
- **收入**: 产生的收入（人民币）
- **订单数**: 订单数量

## 数据质量检查

1. 检查缺失值和空单元格（小程序推送渠道不会有展示次数，这是正常的）
2. 验证数值列中没有负值
3. 标记异常情况（例如，有转化但没有点击）
4. 检查数据完整性（确保每天、每个渠道的数据都存在）
5. 识别异常值（如 CTR 或 CVR 异常高或异常低的情况）

## 漏斗分析

按渠道计算：

- **点击率 (CTR)** = 点击次数 / 展示次数 × 100
- **转化率 (CVR)** = 转化次数 / 点击次数 × 100

与用户提供的基准进行比较，以百分点报告差异，并为每个渠道提供简要解读。如果未提供基准，使用以下历史基准值：

| 渠道 | CTR | CVR |
|------|-----|-----|
| 微信广告 | 2.5% | 4.0% |
| 百度推广 | 5.0% | 5.0% |
| 抖音广告 | 2.0% | 1.0% |
| 小程序推送 | 18.0% | 3.5% |

**注意事项：**
- 小程序推送无展示次数数据，CTR 无法计算，但 CVR 应正常计算
- 对于电商类活动，转化通常指完成购买

## 效率分析

按渠道计算：

- **广告支出回报率 (ROAS)** = 收入 / 支出
- **获客成本 (CPA)** = 支出 / 转化次数
- **净利润** = 收入 - 总成本
  - 总成本 = 支出 + (订单数 × 配送成本) + (收入 × 产品成本百分比)
  - 除非用户指定不同的值，否则使用以下默认值：
    - **配送成本**: 每笔订单 ¥8
    - **产品成本**: 收入的 35%

与用户提供的目标进行比较。如果未提供，使用以下默认目标值：

- **目标 ROAS**: 最低 4.0 倍
- **最大 CPA**: ¥50

**渠道差异化目标建议：**
- 微信广告和百度推广：通常 ROAS 目标应 > 4.0
- 抖音广告：侧重品牌曝光，ROAS 目标可适当降低至 > 1.5
- 小程序推送：成本低，ROAS 通常 > 100

## 输出格式

以表格形式呈现结果，包含状态指示器和清晰的数据对比：

### 1. 数据质量检查报告
简要说明数据完整性、异常值和需要注意的问题。

### 2. 漏斗分析表
| 渠道 | CTR 实际值 | CTR 基准 | CTR 差异 | CVR 实际值 | CVR 基准 | CVR 差异 |
|------|-----------|---------|---------|-----------|---------|---------|

**说明：**
- CTR 和 CVR 以百分比显示
- 差异以百分点表示（如 +0.5pp 或 -0.3pp）
- 小程序推送渠道的 CTR 标注为 "N/A"（无展示次数）

### 3. 效率分析表
| 渠道 | 总支出 | 总收入 | ROAS | ROAS状态 | CPA | CPA状态 | 净利润 | 利润状态 |
|------|--------|--------|------|---------|-----|---------|--------|---------|

**状态指示器：**
- ROAS: 如果 >= 目标则为 "✓ 达标"，如果 < 目标则为 "✗ 未达标"
- CPA: 如果 <= 最大值则为 "✓ 达标"，如果 > 最大值则为 "✗ 超标"
- 净利润: 如果 > 0 则为 "✓ 盈利"，如果 <= 0 则为 "✗ 亏损"

### 4. 渠道绩效总结
在每个表格后面，提供逐渠道的简要解读，包括：
- 关键洞察（表现好的方面）
- 存在的问题
- 建议的优化行动
- 受众分群表现差异（如 New_Customers vs Retargeting）

## 预算重新分配

如果用户询问预算重新分配，请阅读 `references/budget_reallocation_rules.md` 以获取完整的决策框架，包括资格规则、基于绩效的行动和约束条件。

## 可用脚本

本技能提供两个标准化的 Python 脚本，用于确保计算的准确性和一致性：

### 1. `scripts/analyze_campaign.py`

**用途**：多渠道营销活动数据的全面分析

**功能**：
- 数据质量检查（缺失值、异常值、空值处理）
- 漏斗分析（CTR、CVR 计算并与基准对比）
- 效率分析（ROAS、CPA、净利润计算）
- 成本结构分解（广告支出、物流成本、产品成本）
- 自动生成优化建议

**使用场景**：当用户需要分析营销活动绩效、了解各渠道表现时使用此脚本。

**输入要求**：CSV 文件，包含日期、营销活动名称、渠道、受众分群、展示次数、点击次数、转化次数、支出、收入、订单数等列。

### 2. `scripts/budget_reallocation.py`

**用途**：基于绩效规则的预算重新分配建议

**功能**：
- 按绩效指标对渠道进行分类（INCREASE/MAINTAIN/DECREASE_LIGHT/DECREASE_HEAVY）
- 计算预算调整方案（削减低效渠道、增加高效渠道）
- 应用约束条件（总调配限额、单渠道增幅上限）
- 生成详细的分类依据和执行摘要

**使用场景**：当用户询问如何重新分配预算、优化投放策略时使用此脚本。

**输入要求**：与 `analyze_campaign.py` 相同的 CSV 文件。

**注意事项**：
- 这两个脚本提供了标准化的计算逻辑，避免 LLM 在复杂计算中出错
- 脚本可以直接运行，也可以作为代码参考来理解计算逻辑
- 如果用户的数据格式不同，可能需要调整脚本中的列名映射

