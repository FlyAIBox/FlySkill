# 需求澄清流程指南

## 何时使用需求澄清

当用户请求包含以下特征时，应启动需求澄清流程：

1. **范围模糊** - 缺少具体的目标或边界
2. **优先级不明** - 未说明紧急程度或时间要求
3. **约束缺失** - 未提供技术栈或环境限制
4. **验收标准不清** - 无法判断如何验证完成

## 标准澄清流程

### 第 1 步：了解上下文/背景

**目标**：理解为什么需要这个功能/改动

**关键问题**：
- 这个需求的业务背景是什么？
- 遇到了什么问题或机会？
- 预期的用户是谁？

### 第 2 步：确认具体范围/边界

**目标**：明确做什么、不做什么

**关键问题**：
- 核心目标是什么？
- 包含哪些功能/模块？
- 明确排除哪些内容？

### 第 3 步：明确优先级/时间要求

**目标**：理解紧急程度和期望时间线

**关键问题**：
- 这个需求的紧急程度？
- 是否有硬性截止日期？
- 是否可以分阶段交付？

### 第 4 步：识别技术约束/限制

**目标**：了解技术环境和限制条件

**关键问题**：
- 使用的技术栈是什么？
- 有哪些兼容性要求？
- 是否有现有代码/系统需要集成？

### 第 5 步：定义验收标准

**目标**：明确如何判断任务完成

**关键问题**：
- 成功的具体标准是什么？
- 如何验证结果符合预期？
- 是否有性能/质量指标？

### 第 6 步：检查相关依赖

**目标**：识别前置条件和关联模块

**关键问题**：
- 是否依赖其他功能/服务？
- 是否影响现有功能？
- 是否需要跨团队协作？

## 使用 AskUserQuestion 工具

澄清需求时，使用 `AskUserQuestion` 工具一次性收集多个相关信息：

```python
AskUserQuestion(
    questions=[
        {
            "question": "这个需求的核心目标是什么？",
            "header": "核心目标",
            "options": [
                {"label": "性能优化", "description": "提升系统响应速度或吞吐量"},
                {"label": "功能新增", "description": "添加新的业务能力"},
                # ...更多选项
            ],
            "multiSelect": false
        },
        # ...更多问题
    ]
)
```

## 灵活调整

根据具体情况调整流程：
- 简单需求可以合并步骤
- 复杂需求可以增加迭代澄清
- 部分信息可能需要先探索再确认
